<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Exam</title>
</head>
<body>
    <h1>Edit Exam - <%= exam.name %></h1>
<form action="/admin/exam/<%= exam._id %>" method="POST">
        <label>Name:</label>
        <input type="text" name="name" value="<%= exam.name %>" required><br>

        <label>Departments:</label>
        <input type="text" name="departments" value="<%= exam.departments.join(', ') %>" required><br>

        <label>Semester:</label>
        <input type="number" name="semester" value="<%= exam.semester %>" min="1" max="8" required><br>

        <label>Question Type:</label>
        <select name="questionType">
            <option value="mcq" <%= exam.questionType === "mcq" ? "selected" : "" %>>MCQ</option>
            <option value="coding" <%= exam.questionType === "coding" ? "selected" : "" %>>Coding</option>
            <option value="mcq&coding" <%= exam.questionType === "mcq&coding" ? "selected" : "" %>>MCQ + Coding</option>
        </select><br>

        <label>MCQs:</label>
        <input type="number" name="numMCQs" value="<%= exam.numMCQs %>"><br>

        <label>Coding Questions:</label>
        <input type="number" name="numCoding" value="<%= exam.numCoding %>"><br>

        <label>Total Questions:</label>
        <input type="number" name="numTotalQuestions" value="<%= exam.numTotalQuestions %>" required><br>

        <label>Start Time:</label>
        <input type="datetime-local" name="scheduledAt" value="<%= exam.scheduledAt.toISOString().slice(0,16) %>" required><br>

        <label>End Time:</label>
        <input type="datetime-local" name="scheduleTill" 
            value="<%= exam.scheduleTill ? exam.scheduleTill.toISOString().slice(0,16) : '' %>" 
            required><br>

        <label>Duration (minutes):</label>
        <input type="number" name="duration" value="<%= exam.duration %>" required><br>

        <button type="submit">Save Changes</button>
    </form> 





















    <form action="/admin/exam/<%= exam._id %>" method="POST">
    <label>Exam Name:</label>
    <input type="text" name="name" value="<%= exam.name %>" required>

    <label>Departments:</label><br>
    <% ["mc", "is", "cs", "et", "ec", "ai", "cv"].forEach(dept => { %>
        <input type="checkbox" name="departments" value="<%= dept %>" 
            <%= exam.departments.includes(dept) ? "checked" : "" %>> <%= dept.toUpperCase() %>
    <% }) %>

    <label>Semester:</label>
    <input type="number" name="semester" min="1" max="8" value="<%= exam.semester %>" required>

    <label>Question Type:</label>
    <select id="questionType" name="questionType" onchange="toggleQuestionFields()" required>
        <option value="mcq" <%= exam.questionType === "mcq" ? "selected" : "" %>>MCQ</option>
        <option value="coding" <%= exam.questionType === "coding" ? "selected" : "" %>>Coding</option>
        <option value="mcq&coding" <%= exam.questionType === "mcq&coding" ? "selected" : "" %>>MCQ + Coding</option>
    </select>

    <div id="mcqFields">
        <label>Number of MCQ Questions:</label>
        <input type="number" name="numMCQs" id="numMCQs" value="<%= exam.numMCQs || '' %>">
    </div>

    <div id="codingFields">
        <label>Number of Coding Questions:</label>
        <input type="number" name="numCoding" id="numCoding" value="<%= exam.numCoding || '' %>">
    </div>

    <div id="totalQuestionFields">
        <label>Total Questions:</label>
        <input type="number" name="numTotalQuestions" id="numTotalQuestions" value="<%= exam.numMCQs + exam.numCoding || '' %>">
    </div>

    <label>Duration (minutes):</label>
    <input type="number" name="duration" value="<%= exam.duration || '' %>" required>

    <label>Scheduled At:</label>
    <input type="datetime-local" name="scheduledAt" value="<%= exam.scheduledAt ? exam.scheduledAt.toISOString().slice(0,16) : '' %>" required>

    <label>Scheduled Till:</label>
    <input type="datetime-local" name="scheduledTill" value="<%= exam.scheduledTill ? exam.scheduledTill.toISOString().slice(0,16) : '' %>" required>

    <button type="submit">Update Exam</button>
</form>

<script>
    function toggleQuestionFields() {
        const type = document.getElementById("questionType").value;
        document.getElementById("mcqFields").style.display = type === "mcq" || type === "mcq&coding" ? "block" : "none";
        document.getElementById("codingFields").style.display = type === "coding" || type === "mcq&coding" ? "block" : "none";
        document.getElementById("totalQuestionFields").style.display = type === "mcq&coding" ? "block" : "none";
    }
    toggleQuestionFields();
</script>

</body>
</html> -->
















<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Exam</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 30px;
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        .form-label {
            font-weight: bold;
        }
        .form-control, .form-select {
            margin-bottom: 15px;
        }
        .form-check-inline {
            margin-right: 10px;
        }
        .btn-primary {
            padding: 10px 20px;
        }
        .card {
            padding: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Edit Exam - <%= exam.name %></h1>
        <div class="card">
            <form action="/admin/exam/<%= exam._id %>" method="POST">
                <div class="mb-3">
                    <label for="examName" class="form-label">Exam Name:</label>
                    <input type="text" id="examName" name="name" class="form-control" value="<%= exam.name %>" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Departments:</label><br>
                    <% ["mc", "is", "cs", "et", "ec", "ai", "cv"].forEach(dept => { %>
                        <div class="form-check form-check-inline">
                            <input type="checkbox" name="departments" value="<%= dept %>" class="form-check-input" 
                                <%= exam.departments.includes(dept) ? "checked" : "" %>>
                            <label class="form-check-label"><%= dept.toUpperCase() %></label>
                        </div>
                    <% }) %>
                </div>

                <div class="mb-3">
                    <label for="semester" class="form-label">Semester:</label>
                    <input type="number" id="semester" name="semester" class="form-control" min="1" max="8" value="<%= exam.semester %>" required>
                </div>

                <div class="mb-3">
                    <label for="questionType" class="form-label">Question Type:</label>
                    <select id="questionType" name="questionType" class="form-select" onchange="toggleQuestionFields()" required>
                        <option value="mcq" <%= exam.questionType === "mcq" ? "selected" : "" %>>MCQ</option>
                        <option value="coding" <%= exam.questionType === "coding" ? "selected" : "" %>>Coding</option>
                        <option value="mcq&coding" <%= exam.questionType === "mcq&coding" ? "selected" : "" %>>MCQ + Coding</option>
                    </select>
                </div>

                <div id="mcqFields" class="mb-3" style="display: none;">
                    <label for="numMCQs" class="form-label">Number of MCQ Questions:</label>
                    <input type="number" id="numMCQs" name="numMCQs" class="form-control" value="<%= exam.numMCQs || '' %>">
                </div>

                <div id="codingFields" class="mb-3" style="display: none;">
                    <label for="numCoding" class="form-label">Number of Coding Questions:</label>
                    <input type="number" id="numCoding" name="numCoding" class="form-control" value="<%= exam.numCoding || '' %>">
                </div>

                <div id="totalQuestionFields" class="mb-3" style="display: none;">
                    <label for="numTotalQuestions" class="form-label">Total Questions:</label>
                    <input type="number" id="numTotalQuestions" name="numTotalQuestions" class="form-control" value="<%= exam.numMCQs + exam.numCoding || '' %>">
                </div>

                <div class="mb-3">
                    <label for="duration" class="form-label">Duration (minutes):</label>
                    <input type="number" id="duration" name="duration" class="form-control" value="<%= exam.duration || '' %>" required>
                </div>

                <div class="mb-3">
                    <label for="scheduledAt" class="form-label">Scheduled At:</label>
                    <input type="datetime-local" id="scheduledAt" name="scheduledAt" class="form-control" 
                        value="<%= exam.scheduledAt ? exam.scheduledAt.toISOString().slice(0,16) : '' %>" required>
                </div>

                <div class="mb-3">
                    <label for="scheduledTill" class="form-label">Scheduled Till:</label>
                    <input type="datetime-local" id="scheduledTill" name="scheduledTill" class="form-control" 
                        value="<%= exam.scheduledTill ? exam.scheduledTill.toISOString().slice(0,16) : '' %>" required>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Update Exam</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function toggleQuestionFields() {
            const type = document.getElementById("questionType").value;
            document.getElementById("mcqFields").style.display = type === "mcq" || type === "mcq&coding" ? "block" : "none";
            document.getElementById("codingFields").style.display = type === "coding" || type === "mcq&coding" ? "block" : "none";
            document.getElementById("totalQuestionFields").style.display = type === "mcq&coding" ? "block" : "none";
        }
        toggleQuestionFields();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
